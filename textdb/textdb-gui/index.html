<html>
  <head>
    
    <meta charset="utf-8">
	
	<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
	<script src="textdb.flowchart.js"></script>
	<script src="app.js"></script>
	
	<link href='flowchart.css' rel='stylesheet'>
	<link href='style.css' rel='stylesheet'>

    
  </head>
  <body>

    <div class="menu">
      
      <!-- Menu icon -->
      <div class="icon-close">
        <img src="http://s3.amazonaws.com/codecademy-content/courses/ltp2/img/uber/close.png">
      </div>

      <!-- Menu -->
      <ul>
		<li rel="regex-panel" class="regex-matcher">Create Regex Matcher</li>
			<div id="regex-panel" class="panel">
                <em>Enter Regex: </em><br/>
				<input type="text" id="regexText" placeholder="zika\s*(virus|fever)"><br/>
				<br/>
                <br/>
                <button rel="regex-panel" class="create_operator">Create operator</button><br/>
            </div>
		<li rel="keyword-panel" class="keyword-matcher">Create Keyword Matcher</li>
			<div id="keyword-panel" class="panel">
                <em>Enter Keyword: </em><br/>
				<input type="text" id="keywordText" placeholder="Zika"><br/>
                <br/>
                <br/>
                <button rel="keyword-panel" class="create_operator">Create operator</button><br/><br/>
            </div>
		<li class="-matcher">Create  Matcher</li>
		<li class="-matcher">Create  Matcher</li>
		<li class="-matcher">Create  Matcher</li>
		<li class="-matcher">Create  Matcher</li>
		<li class="-matcher">Create  Matcher</li>
		<li class="-matcher">Create  Matcher</li>
		<li class="-matcher">Create  Matcher</li>
      </ul>
    </div>

    <!-- Main body -->
    <div class="jumbotron">

      <div class="nav">
		<div class="icon-menu">Menu</div>
		<div id="delete-panel">Delete Selected Operator</div>
		
      </div>
	  
	  <div class="dashboard" id="the-flowchart">

	  
<script type="text/javascript">
  $(document).ready(function() {
    var data = {}

    // Apply the plugin on a standard, empty div...
    $('#the-flowchart').flowchart({
      data: data
    });
	
	var operatorI = 0;
	var regexInput = "zika\s*(virus|fever)";
	var keywordInput = "Zika";
	
    $('.create_operator').click(function() {
	  var panel = $(this).attr('rel');
	  var title = 'Default Operator ';
	  var input = 'Default Input';
	  
	  if (panel == 'regex-panel'){
		input = $('#regexText').val();
		title = 'Regex';
		if (input == null || input == ''){
			input = regexInput;
		}
	  }
	  else if (panel == 'keyword-panel'){
		input = $('#keywordText').val();
		title = 'Keyword';
		if (input == null || input == ''){
			input = keywordInput;
		}
	  }
      var operatorId = 'created_operator_' + operatorI;
      var operatorData = {
        top: 60,
        left: 500,
        properties: {
          title: (title) + ' Operator',
          inputs: {
            input_1: {
              label: input,
            }
          },
          outputs: {
            output_1: {
              label: 'Output 1',
            }
          }
        }
      };
      
      operatorI++;
      
      $('#the-flowchart').flowchart('createOperator', operatorId, operatorData);
    });
	
	$('#delete-panel').click(function() {
      $('#the-flowchart').flowchart('deleteSelected');
    });
	
  });
</script>


	  </div>
	  
    
  </body>
</html>