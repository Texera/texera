<div class="hub-workflow-detail-container">
  <button
    *ngIf="isHub"
    nz-button
    nzType="text"
    nzSize="large"
    class="go-back-button"
    (click)="goBack()">
    <span
      nz-icon
      nzType="arrow-left"
      nzTheme="outline"></span>
  </button>

  <div class="container prevent-select">
    <div class="header-info">
      <div class="detail-title">
        <h1>Workflow Detail Page</h1>
      </div>
      <div class="workflow-panel">
        <!-- View button -->
        <button
          nz-button
          nzType="text"
          class="dropdown-item like-button"
          title="View"
          (click)="changeViewDisplayStyle()">
          <i
            nz-icon
            [nzType]="'eye'"
            class="like-icon">
          </i>
          <span>{{ formatViewCount(viewCount) }}</span>
        </button>

        <!-- Like button -->
        <button
          nz-button
          nzType="text"
          class="dropdown-item like-button"
          title="Like"
          [ngClass]="{ liked: isLiked, 'disabled-button': !isLogin }"
          [disabled]="!isLogin"
          (click)="toggleLike(this.wid, this.currentUid)">
          <i
            nz-icon
            [nzTheme]="isLiked ? 'fill' : 'outline'"
            [nzType]="'like'"
            [ngClass]="isLiked ? 'liked' : 'not-liked'"
            class="like-icon">
          </i>
          <span>{{ formatLikeCount(likeCount) }}</span>
        </button>

        <!-- Clone button -->
        <button
          nz-button
          nzType="text"
          class="clone-button"
          title="Copy"
          [ngClass]="{ 'disabled-button': !isLogin || !isHub }"
          [disabled]="!isLogin || !isHub"
          (click)="cloneWorkflow()">
          <i
            nz-icon
            nzType="copy"
            nzTheme="outline"></i>
          <span>{{ formatLikeCount(cloneCount) }}</span>
        </button>
      </div>
    </div>

    <div class="workflow-info">
      <div>
        <h2>ID</h2>
        <p>{{ wid }}</p>
      </div>
      <div>
        <h2>Workflow Name</h2>
        <p>{{ workflowName }}</p>
      </div>
      <div>
        <h2>Created By</h2>
        <p>{{ ownerName }}</p>
      </div>
    </div>
    <div class="workflow-description">
      <h2>Description</h2>
      <p>{{workflowDescription}}</p>
    </div>

    <h2>Preview</h2>
    <div class="preview-containers">
      <texera-workflow-editor></texera-workflow-editor>
      <texera-mini-map class="box"></texera-mini-map>
    </div>
    <ng-template #codeEditor></ng-template>
    <div class="workflow-steps">
      <h2>Steps</h2>

      <div
        *ngFor="let step of workflow.steps"
        class="workflow-step">
        <h3>{{ step.name }}</h3>
        <p>{{ step.description }}</p>
        <p><strong>Status:</strong> {{ step.status }}</p>
      </div>
    </div>
  </div>
</div>
