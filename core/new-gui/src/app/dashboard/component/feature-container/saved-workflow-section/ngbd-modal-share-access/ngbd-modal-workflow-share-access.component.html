<div class="modal-header">
  <h4
    class="modal-title"
    id="modal-basic-title">
    Share This Workflow With Someone
  </h4>
  <button
    (click)="activeModal.dismiss('Cross click')"
    aria-label="Close"
    class="close"
    type="button">
    <span aria-hidden="true"> Ã— </span>
  </button>
</div>
<div class="modal-body">
  <form
    (ngSubmit)="onClickShareWorkflow(workflow)"
    [formGroup]="shareForm">
    <div class="form-group">
      <label for="username"> Username of the target user to share </label>
      <input
        [(ngModel)]="ownerSearchValue"
        nz-input
        nzBackdrop="false"
        class="form-control"
        formControlName="username"
        id="username"
        type="text"
        (ngModelChange)="onChange($event)"
        [nzAutocomplete]="auto" />
      <nz-autocomplete
        [nzDefaultActiveFirstOption]="false"
        [nzDataSource]="filteredOwners"
        nzBackfill
        #auto></nz-autocomplete>
      <br />

      <div nz-row [nzGutter]="12">
        <div nz-col [nzSpan]="12">
          <nz-card nzTitle="Share">
            <div style="height:50px;">
              Access Level:
              <select>
                <option value="read">read</option>
                <option value="read">write</option>
              </select>
            </div>
            <button
              style="width:100%;"
              nz-button
              nzType="primary"
              type="submit">
              Share
            </button>
          </nz-card>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-card nzTitle="Transfer">
            <div style="height:50px;"></div>
            <button
              nzDanger
              style="width:100%;"
              nz-button
              nzType="primary"
              type="submit">
              Transfer
            </button>
          </nz-card>
        </div>
      </div>


    </div>
  </form>
  <br />
  <button
    (click)="onClickGetAllSharedAccess(workflow)"
    nz-button
    nz-tooltip="reload all accesses"
    nzSize="small"
    nzTooltipPlacement="bottom">
    <i
      nz-icon
      nzTheme="outline"
      nzType="reload"></i>
  </button>
  <label for="current-share">Access:</label>
  <ul
    class="current-share"
    id="current-share">
    <li>{{ workflowOwner }} <span class="badge badge-primary">Owner</span></li>
    <li *ngFor="let userWorkflowAccess of allUserWorkflowAccess">
      {{ userWorkflowAccess.userName }}
      <span class="badge badge-primary">{{ userWorkflowAccess.accessLevel }}</span>
      <button
        (click)="onClickRemoveAccess(workflow, userWorkflowAccess.userName)"
        nz-button
        nz-tooltip="revoke access"
        nzSize="small"
        nzTooltipPlacement="bottom">
        <i
          nz-icon
          nzTheme="outline"
          nzType="delete"></i>
      </button>
    </li>
  </ul>
</div>
