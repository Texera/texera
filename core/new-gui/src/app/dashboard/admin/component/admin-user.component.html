<div class="section-container subsection-grid-container">
  <nz-card class="section-title">
    <h2 class="page-title">Users</h2>
  </nz-card>
  <nz-card>
    <nz-table #basicTable [nzData]="getUserArray()">
      <thead>
      <tr>
        <th>Avatar</th>
        <th [nzSortFn]="sortByID">ID</th>
        <th [nzSortFn]="sortByName">Name</th>
        <th [nzSortFn]="sortByEmail">Email</th>
        <th [nzSortFn]="sortByRole">Role</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let user of basicTable.data">

        <td><texera-user-avatar class="user-avatar" [googleId]="user.googleId"></texera-user-avatar></td>
        <td>{{user.uid}}</td>
        <td>{{user.name}}</td>
        <td>{{user.email}}</td>
        <td>
          <nz-select [nzShowArrow]=false ngModel="{{user.role}}" (ngModelChange)="updateRole(user.uid,$event)" [nzCustomTemplate]="roleTemplate" nzBorderless class="extra-width">
            <nz-option nzValue="INACTIVE" nzLabel="0" nzCustomContent><span class="role c0">INACTIVE</span></nz-option>
            <nz-option nzValue="REGULAR" nzLabel="1" nzCustomContent><span class="role c1">REGULAR</span></nz-option>
            <nz-option nzValue="ADMIN" nzLabel="2" nzCustomContent><span class="role c2">ADMIN</span></nz-option>
            <nz-option nzValue="RESTRICTED" nzLabel="3" nzCustomContent><span class="role c3">RESTRICTED</span></nz-option>
          </nz-select>
        </td>
        <td>
          <a nz-popconfirm="" nzPopconfirmTitle="Sure to delete?" (nzOnConfirm)="deleteUser(user.uid)">Delete</a>
        </td>
      </tr>
      </tbody>
    </nz-table>
    <ng-template #roleTemplate let-selected>
      <span class="role c{{selected.nzLabel}}">{{selected.nzValue}}</span>
    </ng-template>
  </nz-card>
</div>